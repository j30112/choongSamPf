<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.postgre.choongsam.mapper.Sh_mapper">
	<select id="studentLecture" parameterType="map" resultType="com.postgre.choongsam.dto.Class_ScheduleAddVideo">
		SELECT *
		FROM "CLASS_SCHEDULE" c
		JOIN "LECTURE_VIDEO" lv
		ON c."CONTS_ID" = lv."CONTS_ID"
		JOIN "LECTURE" l
		ON c."LCTR_ID" = l."LCTR_ID"
		JOIN "USER_INFO" u
		ON c."USER_SEQ" = u."USER_SEQ"
		WHERE
			c."LCTR_ID" = #{lctr_id}
			AND c."USER_SEQ" = #{user_seq}
			ORDER BY c."LCTR_NO"
	</select>
	
	<select id="getStartDay" parameterType="String" resultType="com.postgre.choongsam.dto.Class_ScheduleAddVideo">
		SELECT l."LCTR_START_DATE", s."LCTR_NO", l."LCTR_CNTSCHD", v."VIEWING_PERIOD"
		FROM "LECTURE" l
		JOIN "SYLLABUS" s
		ON l."LCTR_ID" = s."LCTR_ID"
		JOIN "LECTURE_VIDEO" v
		ON s."CONTS_ID" = v."CONTS_ID"
		WHERE l."LCTR_ID" = #{lctr_id}
		ORDER BY 
		    s."LCTR_NO" DESC
		LIMIT 1;
	</select>
</mapper>