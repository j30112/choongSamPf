<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.postgre.choongsam.mapper.HMS">

	<select id="findAllVideo" resultType="Lecture_Video">
		SELECT * 
		FROM "LECTURE_VIDEO" 
		WHERE "CONTS_ID" IN ('1000','1001')
	</select>

	<update id="saveWatchTime" parameterType="Class_Schedule">
		UPDATE "CLASS_SCHEDULE" 
		SET
			"LCTR_NO" = SL."LCTR_NO",
			"LCTR_ID" = SL."LCTR_ID",
			"USER_SEQ" = SL."USER_SEQ",
			"CONTS_FINAL" = #{conts_final},
			"CONTS_MAX" = #{conts_max},
			"CONTS_PRGRT" = #{conts_prgrt}
		FROM "SYLLABUS" SL
		WHERE "CLASS_SCHEDULE"."LCTR_NO" = SL."LCTR_NO"
		AND "CLASS_SCHEDULE"."CONTS_ID" = #{conts_id}
	</update>
	
	<update id="noMaxUpdate" parameterType="Class_Schedule">
		UPDATE "CLASS_SCHEDULE" 
		SET
			"LCTR_NO" = SL."LCTR_NO",
			"LCTR_ID" = SL."LCTR_ID",
			"USER_SEQ" = SL."USER_SEQ",
			"CONTS_FINAL" = #{conts_final},
			"CONTS_PRGRT" = #{conts_prgrt}
		FROM "SYLLABUS" SL
		WHERE "CLASS_SCHEDULE"."LCTR_NO" = SL."LCTR_NO"
		AND "CLASS_SCHEDULE"."CONTS_ID" = #{conts_id}
	</update>
	
	<select id="findLctrInfo" parameterType="String" resultType="SYLLABUS">
		SELECT *
		FROM "SYLLABUS"
		WHERE "CONTS_ID"=#{videoId}
	</select>
	
	<select id="CurrentMax" parameterType="String" resultType="int">
		SELECT "CONTS_MAX"
		FROM "CLASS_SCHEDULE"
		WHERE "CONTS_ID"=#{videoId}
	</select>
	
	<select id="finalTime" parameterType="String" resultType="int">
		SELECT "CONTS_FINAL"
		FROM "CLASS_SCHEDULE"
		WHERE "CONTS_ID"=#{videoId}
	</select>
	
	<select id="FileDown" parameterType="String" resultType="String">
		SELECT "FILE_PATH_NM"
		FROM "FILE_GROUP"
		WHERE "FILE_NM"= #{filename}
	</select>
	


</mapper>
